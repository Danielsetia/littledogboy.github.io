<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>我是如何分析强制屏幕旋转的 | Shumin Wu の 魔法协会</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="一直喜欢看动漫，而每一季度的番剧版权都不归某一家所有，于是手机上装了ACFUN、 BiliBili、爱奇艺PPS、优酷、搜狐视频等爱啪啪。
这几个App在视频播放时，初始情况都为竖屏，点击旋转按钮切换为横屏。
用的时间久了就发现大家在播放视频时做屏幕强制旋转的方式都有点不一样。但可以划分为两派：ACFUN 、 BiliBili、爱奇艺PPS 和 搜狐视频 转动的是播放视频的 view.transf">
<meta property="og:type" content="article">
<meta property="og:title" content="我是如何分析强制屏幕旋转的">
<meta property="og:url" content="http://littledogboy.github.io/2016/11/14/我是如何分析强制屏幕旋转的/index.html">
<meta property="og:site_name" content="Shumin Wu の 魔法协会">
<meta property="og:description" content="一直喜欢看动漫，而每一季度的番剧版权都不归某一家所有，于是手机上装了ACFUN、 BiliBili、爱奇艺PPS、优酷、搜狐视频等爱啪啪。
这几个App在视频播放时，初始情况都为竖屏，点击旋转按钮切换为横屏。
用的时间久了就发现大家在播放视频时做屏幕强制旋转的方式都有点不一样。但可以划分为两派：ACFUN 、 BiliBili、爱奇艺PPS 和 搜狐视频 转动的是播放视频的 view.transf">
<meta property="og:image" content="http://ww3.sinaimg.cn/large/650c943bgw1f9rfl5k7yzj20do0dv75u">
<meta property="og:image" content="http://ww3.sinaimg.cn/large/650c943bgw1f9rgkz5t85j20zw0jqtbb">
<meta property="og:image" content="http://ww3.sinaimg.cn/large/650c943bgw1f9rgsx4325j20r00ti461">
<meta property="og:updated_time" content="2016-11-14T04:40:05.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="我是如何分析强制屏幕旋转的">
<meta name="twitter:description" content="一直喜欢看动漫，而每一季度的番剧版权都不归某一家所有，于是手机上装了ACFUN、 BiliBili、爱奇艺PPS、优酷、搜狐视频等爱啪啪。
这几个App在视频播放时，初始情况都为竖屏，点击旋转按钮切换为横屏。
用的时间久了就发现大家在播放视频时做屏幕强制旋转的方式都有点不一样。但可以划分为两派：ACFUN 、 BiliBili、爱奇艺PPS 和 搜狐视频 转动的是播放视频的 view.transf">
  
    <link rel="alternative" href="/atom.xml" title="Shumin Wu の 魔法协会" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/img/avatar.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Shumin Wu</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/tags/动漫">动漫</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/littledogboy" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/p/1005051695323195/home?from=page_100505&mod=TAB#place" title="weibo">weibo</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/3DTouch/" style="font-size: 10px;">3DTouch</a> <a href="/tags/AVFoundation/" style="font-size: 10px;">AVFoundation</a> <a href="/tags/AutoLayout/" style="font-size: 10px;">AutoLayout</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/UIKit/" style="font-size: 10px;">UIKit</a> <a href="/tags/iOS布局/" style="font-size: 10px;">iOS布局</a> <a href="/tags/动漫/" style="font-size: 10px;">动漫</a> <a href="/tags/己亥杂言/" style="font-size: 10px;">己亥杂言</a> <a href="/tags/强制屏幕旋转/" style="font-size: 10px;">强制屏幕旋转</a> <a href="/tags/自适应高度/" style="font-size: 10px;">自适应高度</a> <a href="/tags/视频播放/" style="font-size: 10px;">视频播放</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">iOS开发者 、 动漫爱好者 、 mader</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Shumin Wu</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/img/avatar.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Shumin Wu</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/tags/动漫">动漫</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/littledogboy" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/p/1005051695323195/home?from=page_100505&mod=TAB#place" title="weibo">weibo</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-我是如何分析强制屏幕旋转的" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/11/14/我是如何分析强制屏幕旋转的/" class="article-date">
  	<time datetime="2016-11-14T04:38:03.000Z" itemprop="datePublished">2016-11-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      我是如何分析强制屏幕旋转的
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/UIKit/">UIKit</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/强制屏幕旋转/">强制屏幕旋转</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>一直喜欢看动漫，而每一季度的番剧版权都不归某一家所有，于是手机上装了ACFUN、 BiliBili、爱奇艺PPS、优酷、搜狐视频等爱啪啪。</p>
<p>这几个App在视频播放时，初始情况都为竖屏，点击旋转按钮切换为横屏。</p>
<p>用的时间久了就发现大家在播放视频时做屏幕强制旋转的方式都有点不一样。但可以划分为两派：ACFUN 、 BiliBili、爱奇艺PPS 和 搜狐视频 转动的是播放视频的 view.transform ；优酷 转动的是 UIDevice 的Orientation。</p>
<p>假如竖屏下以小视频播放，同时视频下有其他视图。那么这两种转动方式在 UI 上的差异为： </p>
<ul>
<li>转动 view.transform 仅是视频图层转动，其他图层不转动。  </li>
<li>转动 UIDevice 其他图层也会转动，。</li>
</ul>
<p>如何让项目支持屏幕旋转？支持旋转的方向？如何仅让某一个控制器支持屏幕旋转？转动时执行的方法？这里就不再赘述了。请多查询资料或者参考以下几篇文章：  </p>
<p><a href="http://adad184.com/2014/09/19/how-to-force-rotate-screen/" target="_blank" rel="external">里脊串：如何强制旋转屏幕</a><br><a href="http://foggry.com/blog/2014/08/08/ping-mu-xuan-zhuan-xue-xi-bi-ji/" target="_blank" rel="external">王中周：iOS屏幕旋转学习笔记</a></p>
<p>这里仅强调一下，注意：决定屏幕旋转的控制权。iOS6.0+ 之后，决定屏幕旋转的控制权的优先级为 application &gt; window.rootViewController &gt; currentViewController。<br>如果 viewController 是模态出来的，那么屏幕旋转的控制权还与模态方式有关。</p>
<h2 id="方式1：_UIDevice_的_orientation">方式1： UIDevice 的 orientation</h2><p>改变 UIDevice 的 orientation，实际上强制改变了设备朝向，从而使 window，rootVC，currentVC 视图朝向全部发生了改变。</p>
<h3 id="性能分析：">性能分析：</h3><ul>
<li>改变了 UIDevice 的 orientation</li>
<li>触发屏幕旋转方法 <code>viewWillTransitionToSize</code>(iOS8.0+)</li>
<li>触发 sizeClass 改变方法 <code>willTransitionToTraitCollection</code></li>
</ul>
<p>优点： 1. 视图的旋转由系统自动实现 2. 可以触发 横竖屏 sizeClass，所以适用 IB 中不同 sizeClass 下做的约束。</p>
<p>缺点： 改变的是 UIDevice 的方向，所以所有视图都发生了旋转。（UI不美观）</p>
<h3 id="实现方式">实现方式</h3><p><code>[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationPortrait];</code><br> iOS6.0之后， 改为了私有方法，不能直接调用。</p>
<p>虽然不可以直接调用，但是我们可以用 KVC 或者 NSInvocation 方式调用。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+ (void)forceOrientation:(UIInterfaceOrientation)orientation &#123;&#10;    // setOrientation: &#31169;&#26377;&#26041;&#27861;&#24378;&#21046;&#27178;&#23631;&#10;    if ([[UIDevice currentDevice] respondsToSelector:@selector(setOrientation:)]) &#123;&#10;        SEL selector = NSSelectorFromString(@&#34;setOrientation:&#34;);&#10;        NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:[UIDevice instanceMethodSignatureForSelector:selector]];&#10;        &#10;        [invocation setSelector:selector];&#10;        [invocation setTarget:[UIDevice currentDevice]];&#10;        int val = orientation;&#10;        [invocation setArgument:&#38;val atIndex:2];&#10;        [invocation invoke];&#10;    &#125;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>ps： 里脊串大神的文章中，提到使用这种方式上架无碍。</p>
<h2 id="方式2：_controller-view-transform">方式2： controller.view.transform</h2><p>如果想要在多视图的情况下，仅使某一视图旋转，只有旋转view.transform 了。</p>
<h3 id="性能分析：-1">性能分析：</h3><ul>
<li>改变了 view.transfrom </li>
<li>不会触发屏幕旋转方法</li>
<li>不会触发 sizeClass 改变方法</li>
</ul>
<p>优点： UI 优美，仅一个视图发生旋转</p>
<p>缺点： 1. 实现较为繁琐，需要自己实现视图旋转 2. 不会触发 sizeClass 改变，所以需要用代码写两套约束。</p>
<h3 id="实现方式-1">实现方式</h3><p>如果我们选择使用改变 view.transform 来模拟横竖屏旋转。那么我们要实现的功能如下：</p>
<ol>
<li>点击旋转按钮后，根据当前设备朝向，view 转动 90° 或者 -90°，frame 大小为全屏。</li>
<li>在横屏状态 left 和 right 切换时，view 转动 180°</li>
<li>再次点击旋转按钮，根据当前设备朝向，view 转动 -90° 或者 90°，frame 大小为窗口。状态</li>
</ol>
<p>下面我放了一张手绘图，可以看的很明白。（图1： 视频旋转视图）<br><img src="http://ww3.sinaimg.cn/large/650c943bgw1f9rfl5k7yzj20do0dv75u" alt="视频视图旋转"></p>
<p>下面我们要解决的问题有以下几个：</p>
<ol>
<li>小屏切换到竖屏时如何获得当前当前设备方向。 我们要根据当前设备方向来决定转 90° 还是 -90°。</li>
<li>横屏两种状态下，如何自动旋转180°。</li>
<li>如何转动状态条。</li>
</ol>
<p>下面逐个分析解决。</p>
<h3 id="问题1：_竖屏切换横屏时如何判断当前设备方向">问题1： 竖屏切换横屏时如何判断当前设备方向</h3><p>一提到获取设备当前方向，普遍会想到这有什么难的。直接使用  <code>[UIDevice currentDevice].orientation</code> 来获取当前设备朝向不就行了么？</p>
<p>如果仅是简单的获取具体的设备朝向，当前可以,我们会获取到以下某一个枚举值。 但是如果用户斜着拿手机呢？ </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">typedef NS_ENUM(NSInteger, UIDeviceOrientation) &#123;&#10;    UIDeviceOrientationUnknown,&#10;    UIDeviceOrientationPortrait,            // Device oriented vertically, home button on the bottom&#10;    UIDeviceOrientationPortraitUpsideDown,  // Device oriented vertically, home button on the top&#10;    UIDeviceOrientationLandscapeLeft,       // Device oriented horizontally, home button on the right&#10;    UIDeviceOrientationLandscapeRight,      // Device oriented horizontally, home button on the left&#10;    UIDeviceOrientationFaceUp,              // Device oriented flat, face up&#10;    UIDeviceOrientationFaceDown             // Device oriented flat, face down&#10;&#125; __TVOS_PROHIBITED;</span><br></pre></td></tr></table></figure>
<p> <code>UIDeviceOrientationUnknown</code> 凡是不属于其他6种朝向的通划分为 unknown。 比如：斜着玩手机。</p>
<p> 所以如果用户斜着拿手机，我们获取不到具体是 UIDeviceOrientationLandscapeLeft 还是 UIDeviceOrientationLandscapeRight。</p>
<p> 如果想要获取到矢量方向，那么就必须要借住于 加速计。</p>
<h4 id="使用加速计分析力的方向，划分横屏两个状态">使用加速计分析力的方向，划分横屏两个状态</h4><p><img src="http://ww3.sinaimg.cn/large/650c943bgw1f9rgkz5t85j20zw0jqtbb" alt="加速剂中的坐标系"></p>
<p>x轴，从左到右为正； y轴从下到上为正，z轴，从后到前为正。</p>
<p>所以，如果斜着拿手机，我们可以分析，力在 x，y，z 上面的受力。 下面，我画了一张手绘图：（手绘渣请见谅）</p>
<p><img src="http://ww3.sinaimg.cn/large/650c943bgw1f9rgsx4325j20r00ti461" alt="判断力的方向"></p>
<p>ps： 注意图中人的视角。</p>
<p>我们来看受力图中的第一张图，此时手机 y 轴旋转，home 在右边。那么重力G，沿着 x轴 和 z 轴被分解为 x力 和 z力。x力朝向为负， z力朝向为负。 此时设备方向应该划分为： UIDeviceOrientationLandscapeLeft。</p>
<p>第二张图，home 键在左边。重力G 被分解为 x力， z力。 x力为正，z力 为负。此时设备方向应该划分为：UIDeviceOrientationLandscapeRight。</p>
<p>按照力在 x 轴的受力方向，我们可以清楚的辩知，如果 x-，那么方向应为UIDeviceLeft ； 如果 x+ 方向应为UIDeviceRight。</p>
<p>清楚了受力，下面上 加速计 code。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark- &#21152;&#36895;&#35745;&#33719;&#21462;x&#36724;&#21463;&#21147;&#10;- (void)addMotionManager &#123;&#10;    // 1. &#21019;&#24314;&#10;    self.motionManager = [[CMMotionManager alloc] init];&#10;    // 2. &#21028;&#26029;&#26159;&#21542;&#21487;&#29992;&#10;    if (!self.motionManager.isAccelerometerAvailable) &#123;&#10;        return;&#10;    &#125;&#10;    &#10;    // pull &#26041;&#24335;&#65292; &#30001;&#25105;&#20204;&#20915;&#23450;&#10;    [self.motionManager startAccelerometerUpdates];&#10;    &#10;    // push &#26041;&#24335;, &#19968;&#30452;&#26377;&#10;    // 3. &#35774;&#32622;&#38388;&#38548;&#10;//    self.motionManager.gyroUpdateInterval = 1;&#10;//    self.motionManager.accelerometerUpdateInterval = 1;&#10;    // 4. &#24320;&#22987;&#37319;&#26679;&#10;//    [self.motionManager startAccelerometerUpdatesToQueue:[[NSOperationQueue alloc] init] withHandler:^(CMAccelerometerData * _Nullable accelerometerData, NSError * _Nullable error) &#123;&#10;//        CMAcceleration acceleration = accelerometerData.acceleration;&#10;//        NSLog(@&#34;%.2f %.2f %.2f&#34;, acceleration.x, acceleration.y, acceleration.z);&#10;//    &#125;];&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>因为我们仅在点击旋转按钮的时候才需要判断力的朝向，所以选择了 pull 方式，节省点资源。</p>
<p>点击旋转按钮时判断力的方向：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (void)liveViewRatation &#123;&#10;    CMAcceleration acceleration = self.motionManager.accelerometerData.acceleration;&#10;    CGFloat xACC = acceleration.x; // x&#21463;&#21147;&#26041;&#21521;&#12290;&#10;    &#10;    if ([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationPortrait) &#123;&#10;        &#10;        if (xACC &#60;= 0) &#123;&#10;            [self viewTransformRotate:M_PI_2 frame:FULLScreenFrame statusBarOrientation:(UIInterfaceOrientationLandscapeRight) isHiddrenDarkView:NO];&#10;        &#125; else if (xACC &#62; 0) &#123;&#10;            [self viewTransformRotate:-M_PI_2 frame:FULLScreenFrame statusBarOrientation:(UIInterfaceOrientationLandscapeLeft) isHiddrenDarkView:NO];&#10;        &#125;&#10;        &#10;    &#125; else if([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationLandscapeRight) &#123;&#10;        [self viewTransformRotate:-M_PI_2 frame:WindowFrame statusBarOrientation:(UIInterfaceOrientationPortrait) isHiddrenDarkView:YES];&#10;        &#10;    &#125; else if ([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationLandscapeLeft) &#123;&#10;        [self viewTransformRotate:M_PI_2 frame:WindowFrame statusBarOrientation:(UIInterfaceOrientationPortrait) isHiddrenDarkView:YES];&#10;    &#125;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>问题1解决。</p>
<h3 id="问题2：横屏两种状态下，如何自动旋转180°">问题2：横屏两种状态下，如何自动旋转180°</h3><p>横屏下，随着设备转动 在<code>UIDeviceOrientationLandscapeLeft</code> 和 <code>UIDeviceOrientationLandscapeRight</code> 方向下。我们需要转动 view,让 view.transfrom 转动 180°，视图朝向与设备朝向一致。</p>
<p>这里我选择使用通知 <code>UIDeviceOrientationDidChangeNotification</code> 来观察设备方向。 具体代码如下。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#10;// &#27880;&#20876;&#36890;&#30693;&#10;[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientChange:)name:UIDeviceOrientationDidChangeNotification object:nil];&#10;&#10;// &#26041;&#21521;&#25913;&#21464;&#26102;&#65292;&#36716;&#21160; view&#12290;&#10;- (void)orientChange:(NSNotification *)notification&#10;&#123;&#10;    UIDeviceOrientation  orientenation = [UIDevice currentDevice].orientation;&#10;    switch (orientenation)&#10;    &#123;&#10;        case UIDeviceOrientationLandscapeLeft:&#10;        &#123;&#10;            if ([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationLandscapeLeft) &#123;&#10;                [self viewTransformRotate:M_PI statusBarOrientation:(UIInterfaceOrientationLandscapeRight) isHiddrenDarkView:NO];&#10;            &#125;&#10;        &#125;&#10;            break;&#10;            &#10;        case UIDeviceOrientationLandscapeRight:&#10;        &#123;&#10;            if ([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationLandscapeRight) &#123;&#10;                [self viewTransformRotate:M_PI statusBarOrientation:(UIInterfaceOrientationLandscapeLeft) isHiddrenDarkView:NO];&#10;            &#125;&#10;        &#125;&#10;            break;&#10;            &#10;            default:&#10;            break;&#10;    &#125;&#10;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="问题3：如何转动状态条">问题3：如何转动状态条</h3><p><code>[[UIApplication sharedApplication] setStatusBarOrientation:orientation animated:NO]</code></p>
<p>该方法iOS6.0+ 之后也被弃用了，可以用 KVC 或者 objc_msgSend() 等。</p>
<p>注意： 如果发现状态条并没有旋转，把自动旋转设置为 NO</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)shouldAutorotate &#123;&#10;    return NO;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>旋转过程中我发现，如果旋转开始时不隐藏状态条，会有视觉滞留。那么如何隐藏状态条呢？</p>
<p><code>[UIApplication sharedApplication].statusBarHidden = NO;</code></p>
<p>在 info.plist文件中，添加 <code>View controller-based status bar appearance</code> 项并设为 NO。 </p>
<p>注意：如果使用 viewController 来隐藏或者显示状态条，则  <code>View controller-based status bar appearance</code> 设置为 YES。然后实现 <code>prefersStatusBarHidden</code> 方法。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)prefersStatusBarHidden  &#10;&#123;  &#10;   return _isHiddenStatusBar;  &#10;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="总结：">总结：</h2><p>方式一：改变UIDevice orientation 的好处都有啥？ IB 玩家的最爱，可以触发 sizeClass。</p>
<p>方式二：改变 View transform 的好处？UI更好看， 使用加速剂判断方向，使用更人性化，躺在床上打滚再也不用拍手机旋转屏幕了。（拍手机转动屏幕的相信不是我一个人）</p>
<p>两种屏幕旋转方式各有优劣，使用哪种还请看官自行斟酌。</p>
<p>最后放上两个 Demo：</p>
<p><a href="https://github.com/littledogboy/AGPlayer" target="_blank" rel="external">方式1：改变 UIDevice orientation</a><br><a href="https://github.com/littledogboy/AGLiveIJKPlayer" target="_blank" rel="external">方式2：改变 View.transfrom</a></p>
<hr>
<p>参考资料：<br><a href="http://adad184.com/2014/09/19/how-to-force-rotate-screen/" target="_blank" rel="external">里脊串：如何强制旋转屏幕</a><br><a href="http://foggry.com/blog/2014/08/08/ping-mu-xuan-zhuan-xue-xi-bi-ji/" target="_blank" rel="external">王中周：iOS屏幕旋转学习笔记</a><br><a href="http://blog.csdn.net/likendsl/article/details/40888135" target="_blank" rel="external">iOS7下隐藏statusbar</a><br><a href="http://www.jianshu.com/p/233be81b8ead" target="_blank" rel="external">iOS中传感器的基本使用</a></p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2016/10/18/使用-estimatedItemSize-实现-CollectionViewCell-自适应高度/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">使用 estimatedItemSize 实现 CollectionViewCell 自适应高度</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>



<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="我是如何分析强制屏幕旋转的" data-title="我是如何分析强制屏幕旋转的" data-url="http://littledogboy.github.io/2016/11/14/我是如何分析强制屏幕旋转的/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"littledogboy"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    	 &copy; 2016 Shumin Wu
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
        <div class="footer-center">
          <a href="http://www.miibeian.gov.cn" target="_blank">豫ICP备16002850号</a>
        </div>
    </div>
  </div>
</footer>

    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>